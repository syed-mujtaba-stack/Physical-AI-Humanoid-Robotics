"use strict";(globalThis.webpackChunktextbook_frontend=globalThis.webpackChunktextbook_frontend||[]).push([[1306],{7910:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"chapter-03-urdf","title":"Chapter 3: URDF and Xacro for Humanoid Robots","description":"Learning Objectives","source":"@site/docs/chapter-03-urdf.md","sourceDirName":".","slug":"/chapter-03-urdf","permalink":"/Physical-AI-Humanoid-Robotics/docs/chapter-03-urdf","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter-03-urdf.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/Physical-AI-Humanoid-Robotics/docs/tutorial-extras/translate-your-site"},"next":{"title":"Chapter 4: Gazebo Simulation - Testing in the Digital Twin","permalink":"/Physical-AI-Humanoid-Robotics/docs/chapter-04-gazebo"}}');var l=i(4848),s=i(8453);const o={sidebar_position:4},a="Chapter 3: URDF and Xacro for Humanoid Robots",t={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"The Unified Robot Description Format (URDF)",id:"the-unified-robot-description-format-urdf",level:2},{value:"Why URDF Matters for Humanoids",id:"why-urdf-matters-for-humanoids",level:3},{value:"URDF Structure Deep Dive",id:"urdf-structure-deep-dive",level:2},{value:"Links",id:"links",level:3},{value:"1. Visual (Appearance)",id:"1-visual-appearance",level:4},{value:"2. Collision (Physics)",id:"2-collision-physics",level:4},{value:"3. Inertial (Dynamics)",id:"3-inertial-dynamics",level:4},{value:"Joints",id:"joints",level:3},{value:"Joint Types",id:"joint-types",level:4},{value:"Revolute Joint Example (Hip)",id:"revolute-joint-example-hip",level:4},{value:"Xacro: Macros for URDF",id:"xacro-macros-for-urdf",level:2},{value:"Example: Xacro Variables",id:"example-xacro-variables",level:3},{value:"Example: Xacro Macro (Reusable Leg)",id:"example-xacro-macro-reusable-leg",level:3},{value:"Building a Complete Humanoid Model",id:"building-a-complete-humanoid-model",level:2},{value:"Step-by-Step: Humanoid Torso + Legs",id:"step-by-step-humanoid-torso--legs",level:3},{value:"Converting Xacro to URDF",id:"converting-xacro-to-urdf",level:3},{value:"Visualizing in RViz",id:"visualizing-in-rviz",level:2},{value:"Common URDF Mistakes",id:"common-urdf-mistakes",level:2},{value:"1. Incorrect Inertia Tensors",id:"1-incorrect-inertia-tensors",level:3},{value:"2. Collision Geometry Too Complex",id:"2-collision-geometry-too-complex",level:3},{value:"3. Missing <code>base_link</code>",id:"3-missing-base_link",level:3},{value:"4. Joint Limits Too Tight",id:"4-joint-limits-too-tight",level:3},{value:"Lab Exercise: Build a 3-DOF Leg",id:"lab-exercise-build-a-3-dof-leg",level:2},{value:"Objective",id:"objective",level:3},{value:"Step 1: Create Package",id:"step-1-create-package",level:3},{value:"Step 2: Write URDF",id:"step-2-write-urdf",level:3},{value:"Step 3: Create Launch File",id:"step-3-create-launch-file",level:3},{value:"Step 4: Build and Launch",id:"step-4-build-and-launch",level:3},{value:"Tasks",id:"tasks",level:3},{value:"Quiz",id:"quiz",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"chapter-3-urdf-and-xacro-for-humanoid-robots",children:"Chapter 3: URDF and Xacro for Humanoid Robots"})}),"\n",(0,l.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Master URDF syntax for robot description"}),"\n",(0,l.jsx)(n.li,{children:"Understand links, joints, and their properties"}),"\n",(0,l.jsx)(n.li,{children:"Use Xacro for modular, maintainable robot models"}),"\n",(0,l.jsx)(n.li,{children:"Calculate inertial properties for realistic simulation"}),"\n",(0,l.jsx)(n.li,{children:"Visualize and debug URDF models in RViz"}),"\n",(0,l.jsx)(n.li,{children:"Build a complete humanoid leg model"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"the-unified-robot-description-format-urdf",children:"The Unified Robot Description Format (URDF)"}),"\n",(0,l.jsx)(n.p,{children:"URDF is the standard XML format in ROS for describing:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Robot structure"})," (links and joints)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Visual appearance"})," (meshes, colors)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Collision geometry"})," (simplified shapes for physics)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Physical properties"})," (mass, inertia)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Sensor and actuator placement"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"why-urdf-matters-for-humanoids",children:"Why URDF Matters for Humanoids"}),"\n",(0,l.jsx)(n.p,{children:"Humanoid robots have:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"High DOF"}),": 25-40 joints (vs. 6 for industrial arms)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Complex kinematics"}),": Closed-loop chains, parallel mechanisms"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Strict mass budgets"}),": Every gram affects balance"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"A well-crafted URDF enables:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Accurate simulation in Gazebo/Isaac Sim"}),"\n",(0,l.jsx)(n.li,{children:"Correct inverse kinematics (IK) solutions"}),"\n",(0,l.jsx)(n.li,{children:"Realistic physics (inertia, friction, damping)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"urdf-structure-deep-dive",children:"URDF Structure Deep Dive"}),"\n",(0,l.jsx)(n.h3,{id:"links",children:"Links"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"link"})," represents a rigid body. It has three components:"]}),"\n",(0,l.jsx)(n.h4,{id:"1-visual-appearance",children:"1. Visual (Appearance)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<visual>\r\n  <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  <geometry>\r\n    <mesh filename="package://my_robot/meshes/thigh.stl" scale="1 1 1"/>\r\n    \x3c!-- OR --\x3e\r\n    <cylinder radius="0.05" length="0.4"/>\r\n  </geometry>\r\n  <material name="carbon_fiber">\r\n    <color rgba="0.2 0.2 0.2 1.0"/>\r\n  </material>\r\n</visual>\n'})}),"\n",(0,l.jsx)(n.h4,{id:"2-collision-physics",children:"2. Collision (Physics)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<collision>\r\n  <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  <geometry>\r\n    \x3c!-- Simplified geometry for faster collision detection --\x3e\r\n    <cylinder radius="0.06" length="0.4"/>\r\n  </geometry>\r\n</collision>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Best Practice"}),": Use simplified shapes (boxes, cylinders, spheres) for collision geometry to improve simulation performance."]}),"\n",(0,l.jsx)(n.h4,{id:"3-inertial-dynamics",children:"3. Inertial (Dynamics)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<inertial>\r\n  <origin xyz="0 0 -0.2" rpy="0 0 0"/>  \x3c!-- Center of mass --\x3e\r\n  <mass value="2.5"/>\r\n  <inertia ixx="0.0283" ixy="0.0" ixz="0.0"\r\n           iyy="0.0283" iyz="0.0"\r\n           izz="0.00125"/>\r\n</inertial>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Calculating Inertia"}),": For a cylinder of mass ",(0,l.jsx)(n.code,{children:"m"}),", radius ",(0,l.jsx)(n.code,{children:"r"}),", length ",(0,l.jsx)(n.code,{children:"h"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"Ixx = Iyy = (1/12) * m * h\xb2 + (1/4) * m * r\xb2"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"Izz = (1/2) * m * r\xb2"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"joints",children:"Joints"}),"\n",(0,l.jsxs)(n.p,{children:["A ",(0,l.jsx)(n.strong,{children:"joint"})," connects two links and defines their relative motion."]}),"\n",(0,l.jsx)(n.h4,{id:"joint-types",children:"Joint Types"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"Description"}),(0,l.jsx)(n.th,{children:"Use Case"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"revolute"})}),(0,l.jsx)(n.td,{children:"Rotation with limits"}),(0,l.jsx)(n.td,{children:"Knee, elbow"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"continuous"})}),(0,l.jsx)(n.td,{children:"Unlimited rotation"}),(0,l.jsx)(n.td,{children:"Wheel axle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"prismatic"})}),(0,l.jsx)(n.td,{children:"Linear motion"}),(0,l.jsx)(n.td,{children:"Telescoping arm"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"fixed"})}),(0,l.jsx)(n.td,{children:"No motion"}),(0,l.jsx)(n.td,{children:"Sensor mount"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"floating"})}),(0,l.jsx)(n.td,{children:"6-DOF (x, y, z, roll, pitch, yaw)"}),(0,l.jsx)(n.td,{children:"Free-floating base"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"planar"})}),(0,l.jsx)(n.td,{children:"2D motion in a plane"}),(0,l.jsx)(n.td,{children:"Rarely used"})]})]})]}),"\n",(0,l.jsx)(n.h4,{id:"revolute-joint-example-hip",children:"Revolute Joint Example (Hip)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<joint name="left_hip_pitch" type="revolute">\r\n  <parent link="pelvis"/>\r\n  <child link="left_thigh"/>\r\n  <origin xyz="0.0 0.1 -0.05" rpy="0 0 0"/>\r\n  <axis xyz="0 1 0"/>  \x3c!-- Rotation around Y-axis --\x3e\r\n  <limit lower="-1.57" upper="1.57" effort="150" velocity="3.0"/>\r\n  <dynamics damping="0.7" friction="0.5"/>\r\n</joint>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"lower/upper"}),": Joint limits (radians)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"effort"}),": Maximum torque (Nm)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"velocity"}),": Maximum angular velocity (rad/s)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"damping"}),": Viscous damping coefficient"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"friction"}),": Coulomb friction"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"xacro-macros-for-urdf",children:"Xacro: Macros for URDF"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Xacro"})," (XML Macros) extends URDF with:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Variables"}),": Define constants (e.g., ",(0,l.jsx)(n.code,{children:"thigh_length"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Macros"}),": Reusable templates (e.g., ",(0,l.jsx)(n.code,{children:"leg_macro"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Math"}),": Calculate values (e.g., ",(0,l.jsx)(n.code,{children:"${thigh_length / 2}"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Includes"}),": Split large models into files"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-xacro-variables",children:"Example: Xacro Variables"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid">\r\n  \r\n  \x3c!-- Constants --\x3e\r\n  <xacro:property name="thigh_length" value="0.4"/>\r\n  <xacro:property name="thigh_radius" value="0.05"/>\r\n  <xacro:property name="thigh_mass" value="2.5"/>\r\n  \r\n  \x3c!-- Calculated inertia --\x3e\r\n  <xacro:property name="thigh_ixx" value="${(1/12) * thigh_mass * thigh_length * thigh_length + (1/4) * thigh_mass * thigh_radius * thigh_radius}"/>\r\n  \r\n  <link name="left_thigh">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="${thigh_radius}" length="${thigh_length}"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="${thigh_mass}"/>\r\n      <inertia ixx="${thigh_ixx}" ixy="0" ixz="0"\r\n               iyy="${thigh_ixx}" iyz="0"\r\n               izz="${(1/2) * thigh_mass * thigh_radius * thigh_radius}"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n</robot>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"example-xacro-macro-reusable-leg",children:"Example: Xacro Macro (Reusable Leg)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<xacro:macro name="leg" params="prefix reflect">\r\n  \r\n  \x3c!-- Thigh Link --\x3e\r\n  <link name="${prefix}_thigh">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.06" length="0.4"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="2.5"/>\r\n      <inertia ixx="0.0283" ixy="0" ixz="0" iyy="0.0283" iyz="0" izz="0.00125"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Hip Joint --\x3e\r\n  <joint name="${prefix}_hip_pitch" type="revolute">\r\n    <parent link="pelvis"/>\r\n    <child link="${prefix}_thigh"/>\r\n    <origin xyz="0 ${reflect * 0.1} -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-1.57" upper="1.57" effort="150" velocity="3.0"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Shank Link --\x3e\r\n  <link name="${prefix}_shank">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.8"/>\r\n      <inertia ixx="0.024" ixy="0" ixz="0" iyy="0.024" iyz="0" izz="0.00072"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Knee Joint --\x3e\r\n  <joint name="${prefix}_knee" type="revolute">\r\n    <parent link="${prefix}_thigh"/>\r\n    <child link="${prefix}_shank"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="0" upper="2.35" effort="100" velocity="3.0"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Foot Link --\x3e\r\n  <link name="${prefix}_foot">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  \x3c!-- Ankle Joint --\x3e\r\n  <joint name="${prefix}_ankle" type="revolute">\r\n    <parent link="${prefix}_shank"/>\r\n    <child link="${prefix}_foot"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-0.7" upper="0.7" effort="50" velocity="2.0"/>\r\n  </joint>\r\n  \r\n</xacro:macro>\r\n\r\n\x3c!-- Instantiate both legs --\x3e\r\n<xacro:leg prefix="left" reflect="1"/>\r\n<xacro:leg prefix="right" reflect="-1"/>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"prefix"}),': "left" or "right"']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"reflect"}),": 1 or -1 to mirror the leg position"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"building-a-complete-humanoid-model",children:"Building a Complete Humanoid Model"}),"\n",(0,l.jsx)(n.h3,{id:"step-by-step-humanoid-torso--legs",children:"Step-by-Step: Humanoid Torso + Legs"}),"\n",(0,l.jsxs)(n.p,{children:["Create ",(0,l.jsx)(n.code,{children:"humanoid.urdf.xacro"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="simple_humanoid">\r\n  \r\n  \x3c!-- Include leg macro --\x3e\r\n  <xacro:include filename="$(find my_robot)/urdf/leg_macro.xacro"/>\r\n  \r\n  \x3c!-- Base Link (required for ROS) --\x3e\r\n  <link name="base_link"/>\r\n  \r\n  \x3c!-- Pelvis --\x3e\r\n  <link name="pelvis">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.3 0.25 0.15"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="8.0"/>\r\n      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.06" iyz="0" izz="0.08"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="base_to_pelvis" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="pelvis"/>\r\n    <origin xyz="0 0 1.0" rpy="0 0 0"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Torso --\x3e\r\n  <link name="torso">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.5"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="12.0"/>\r\n      <inertia ixx="0.3" ixy="0" ixz="0" iyy="0.35" iyz="0" izz="0.15"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="waist" type="revolute">\r\n    <parent link="pelvis"/>\r\n    <child link="torso"/>\r\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>  \x3c!-- Yaw rotation --\x3e\r\n    <limit lower="-0.5" upper="0.5" effort="80" velocity="1.5"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Instantiate legs --\x3e\r\n  <xacro:leg prefix="left" reflect="1"/>\r\n  <xacro:leg prefix="right" reflect="-1"/>\r\n  \r\n</robot>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"converting-xacro-to-urdf",children:"Converting Xacro to URDF"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"xacro humanoid.urdf.xacro > humanoid.urdf\n"})}),"\n",(0,l.jsx)(n.h2,{id:"visualizing-in-rviz",children:"Visualizing in RViz"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Install joint state publisher GUI\r\nsudo apt install ros-humble-joint-state-publisher-gui\r\n\r\n# Launch visualization\r\nros2 launch urdf_tutorial display.launch.py model:=humanoid.urdf\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What you'll see"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"3D model of the robot"}),"\n",(0,l.jsx)(n.li,{children:"Sliders to move each joint"}),"\n",(0,l.jsx)(n.li,{children:"TF (transform) tree showing link relationships"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-urdf-mistakes",children:"Common URDF Mistakes"}),"\n",(0,l.jsx)(n.h3,{id:"1-incorrect-inertia-tensors",children:"1. Incorrect Inertia Tensors"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Problem"}),": Simulation explodes or robot vibrates uncontrollably."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": Use realistic inertia values. Tools:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://www.meshlab.net/",children:"MeshLab"})," for mesh analysis"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://www.solidworks.com/",children:"SolidWorks"})," exports URDF with correct inertia"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-collision-geometry-too-complex",children:"2. Collision Geometry Too Complex"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Problem"}),": Simulation runs slowly (< 1x real-time)."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": Use primitive shapes (boxes, cylinders) for collision."]}),"\n",(0,l.jsxs)(n.h3,{id:"3-missing-base_link",children:["3. Missing ",(0,l.jsx)(n.code,{children:"base_link"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Problem"}),": ROS tools expect a ",(0,l.jsx)(n.code,{children:"base_link"})," as the root."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": Always include a ",(0,l.jsx)(n.code,{children:"base_link"}),", even if it's just a fixed joint to the pelvis."]}),"\n",(0,l.jsx)(n.h3,{id:"4-joint-limits-too-tight",children:"4. Joint Limits Too Tight"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Problem"}),": Robot can't perform natural motions."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Solution"}),": Reference human joint ranges:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Hip: \xb1120\xb0 (flexion/extension)"}),"\n",(0,l.jsx)(n.li,{children:"Knee: 0\xb0 to 135\xb0 (extension to flexion)"}),"\n",(0,l.jsx)(n.li,{children:"Ankle: \xb145\xb0 (dorsiflexion/plantarflexion)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"lab-exercise-build-a-3-dof-leg",children:"Lab Exercise: Build a 3-DOF Leg"}),"\n",(0,l.jsx)(n.h3,{id:"objective",children:"Objective"}),"\n",(0,l.jsx)(n.p,{children:"Create a URDF for a humanoid leg with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Hip (1 DOF: pitch)"}),"\n",(0,l.jsx)(n.li,{children:"Knee (1 DOF: pitch)"}),"\n",(0,l.jsx)(n.li,{children:"Ankle (1 DOF: pitch)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-1-create-package",children:"Step 1: Create Package"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_cmake humanoid_leg_description\r\ncd humanoid_leg_description\r\nmkdir urdf meshes launch\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-write-urdf",children:"Step 2: Write URDF"}),"\n",(0,l.jsxs)(n.p,{children:["Create ",(0,l.jsx)(n.code,{children:"urdf/leg.urdf.xacro"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid_leg">\r\n  \r\n  <link name="base_link"/>\r\n  \r\n  \x3c!-- Thigh --\x3e\r\n  <link name="thigh">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n      <material name="red">\r\n        <color rgba="0.8 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.06" length="0.4"/>\r\n      </geometry>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="2.5"/>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n      <inertia ixx="0.0283" ixy="0" ixz="0" iyy="0.0283" iyz="0" izz="0.00125"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="hip" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="thigh"/>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-2.09" upper="2.09" effort="150" velocity="3.0"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Shank --\x3e\r\n  <link name="shank">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.4"/>\r\n      </geometry>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n      <material name="green">\r\n        <color rgba="0 0.8 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.8"/>\r\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\r\n      <inertia ixx="0.024" ixy="0" ixz="0" iyy="0.024" iyz="0" izz="0.00072"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="knee" type="revolute">\r\n    <parent link="thigh"/>\r\n    <child link="shank"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="0" upper="2.35" effort="100" velocity="3.0"/>\r\n  </joint>\r\n  \r\n  \x3c!-- Foot --\x3e\r\n  <link name="foot">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n      <origin xyz="0.05 0 0" rpy="0 0 0"/>\r\n      <material name="blue">\r\n        <color rgba="0 0 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n      <origin xyz="0.05 0 0" rpy="0 0 0"/>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <origin xyz="0.05 0 0" rpy="0 0 0"/>\r\n      <inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n  \r\n  <joint name="ankle" type="revolute">\r\n    <parent link="shank"/>\r\n    <child link="foot"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-0.7" upper="0.7" effort="50" velocity="2.0"/>\r\n  </joint>\r\n  \r\n</robot>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-create-launch-file",children:"Step 3: Create Launch File"}),"\n",(0,l.jsxs)(n.p,{children:["Create ",(0,l.jsx)(n.code,{children:"launch/display.launch.py"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom launch.substitutions import Command\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\ndef generate_launch_description():\r\n    urdf_file = os.path.join(\r\n        get_package_share_directory('humanoid_leg_description'),\r\n        'urdf', 'leg.urdf.xacro')\r\n    \r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_state_publisher',\r\n            executable='robot_state_publisher',\r\n            parameters=[{'robot_description': Command(['xacro ', urdf_file])}]\r\n        ),\r\n        Node(\r\n            package='joint_state_publisher_gui',\r\n            executable='joint_state_publisher_gui'\r\n        ),\r\n        Node(\r\n            package='rviz2',\r\n            executable='rviz2',\r\n            arguments=['-d', os.path.join(get_package_share_directory('humanoid_leg_description'), 'rviz', 'leg.rviz')]\r\n        )\r\n    ])\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-build-and-launch",children:"Step 4: Build and Launch"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select humanoid_leg_description\r\nsource install/setup.bash\r\nros2 launch humanoid_leg_description display.launch.py\n"})}),"\n",(0,l.jsx)(n.h3,{id:"tasks",children:"Tasks"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Move the hip, knee, and ankle joints using the GUI"}),"\n",(0,l.jsx)(n.li,{children:"Verify joint limits are respected"}),"\n",(0,l.jsx)(n.li,{children:"Add a second leg using a Xacro macro"}),"\n",(0,l.jsx)(n.li,{children:"Calculate and verify inertia values"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"quiz",children:"Quiz"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["What is the purpose of the ",(0,l.jsx)(n.code,{children:"<collision>"})," element in URDF?"]})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A) Visual appearance"}),"\n",(0,l.jsx)(n.li,{children:"B) Simplified geometry for physics simulation"}),"\n",(0,l.jsx)(n.li,{children:"C) Mass properties"}),"\n",(0,l.jsx)(n.li,{children:"D) Joint limits"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Answer: B"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Which joint type allows unlimited rotation?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["A) ",(0,l.jsx)(n.code,{children:"revolute"})]}),"\n",(0,l.jsxs)(n.li,{children:["B) ",(0,l.jsx)(n.code,{children:"prismatic"})]}),"\n",(0,l.jsxs)(n.li,{children:["C) ",(0,l.jsx)(n.code,{children:"continuous"})]}),"\n",(0,l.jsxs)(n.li,{children:["D) ",(0,l.jsx)(n.code,{children:"fixed"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Answer: C"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What does Xacro provide over plain URDF?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A) Faster parsing"}),"\n",(0,l.jsx)(n.li,{children:"B) Variables, macros, and math"}),"\n",(0,l.jsx)(n.li,{children:"C) Better visualization"}),"\n",(0,l.jsx)(n.li,{children:"D) Automatic inertia calculation"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Answer: B"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why use simplified collision geometry?"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A) Looks better"}),"\n",(0,l.jsx)(n.li,{children:"B) Easier to edit"}),"\n",(0,l.jsx)(n.li,{children:"C) Faster simulation"}),"\n",(0,l.jsx)(n.li,{children:"D) Required by ROS"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Answer: C"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsx)(n.p,{children:"In this chapter, we mastered URDF for describing robot structure, including links (visual, collision, inertial) and joints (revolute, continuous, prismatic, fixed). We learned Xacro for creating modular, maintainable models using variables and macros. We built a complete 3-DOF humanoid leg and visualized it in RViz. Proper URDF modeling is critical for accurate simulation and real-world deployment."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Next Chapter"}),": We'll simulate our humanoid models in Gazebo, adding physics, sensors, and control plugins."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const l={},s=r.createContext(l);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);